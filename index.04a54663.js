const t=new class{constructor(t=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]){this.board=t,this.gameScore=0,this.status="idle"}moveLeft(){let t=!1;for(let e=0;e<this.board.length;e++){let r=this.board[e].filter(t=>0!==t),s=[];for(let e=0;e<r.length;e++)e<r.length-1&&r[e]===r[e+1]?(s.push(2*r[e]),this.gameScore+=2*r[e],r[e+1]=0,t=!0):0!==r[e]&&s.push(r[e]);for(r=s.filter(t=>0!==t);r.length<4;)r.push(0);this.arraysEqual(this.board[e],r)||(this.board[e]=r,t=!0)}t&&(this.addRandomTile(),this.render(),this.updateStatus())}moveRight(){let t=!1;for(let e=0;e<this.board.length;e++){let r=this.board[e].filter(t=>0!==t),s=[];for(let e=r.length-1;e>=0;e--)e>0&&r[e]===r[e-1]?(s.unshift(2*r[e]),this.gameScore+=2*r[e],r[e-1]=0,t=!0):0!==r[e]&&s.unshift(r[e]);for(r=s.filter(t=>0!==t);r.length<4;)r.unshift(0);this.arraysEqual(this.board[e],r)||(this.board[e]=r,t=!0)}t&&(this.addRandomTile(),this.render(),this.updateStatus())}moveUp(){let t=!1;for(let e=0;e<4;e++){let r=[];for(let t=0;t<4;t++)0!==this.board[t][e]&&r.push(this.board[t][e]);let s=[];for(let e=0;e<r.length;e++)e<r.length-1&&r[e]===r[e+1]?(s.push(2*r[e]),this.gameScore+=2*r[e],r[e+1]=0,t=!0):0!==r[e]&&s.push(r[e]);for(r=s.filter(t=>0!==t);r.length<4;)r.push(0);for(let s=0;s<4;s++)this.board[s][e]!==r[s]&&(this.board[s][e]=r[s],t=!0)}t&&(this.addRandomTile(),this.render(),this.updateStatus())}moveDown(){let t=!1;for(let e=0;e<4;e++){let r=[];for(let t=0;t<4;t++)0!==this.board[t][e]&&r.push(this.board[t][e]);let s=[];for(let e=r.length-1;e>=0;e--)e>0&&r[e]===r[e-1]?(s.unshift(2*r[e]),this.gameScore+=2*r[e],r[e-1]=0,t=!0):0!==r[e]&&s.unshift(r[e]);for(r=s.filter(t=>0!==t);r.length<4;)r.unshift(0);for(let s=0;s<4;s++)this.board[s][e]!==r[s]&&(this.board[s][e]=r[s],t=!0)}t&&(this.addRandomTile(),this.render(),this.updateStatus())}getScore(){return this.gameScore}getState(){return this.board}getStatus(){return this.status}start(){this.board=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];let t=document.querySelector(".message-lose"),e=document.querySelector(".message-win"),r=document.querySelector(".message-start");t.classList.add("hidden"),e.classList.add("hidden"),r.classList.remove("hidden"),this.status="playing",this.gameScore=0;let s=document.querySelector("button");s.classList.remove("start"),s.classList.add("restart"),s.textContent="Restart",this.addRandomTile(),this.addRandomTile(),this.render()}restart(){this.start()}render(){let t=document.querySelectorAll(".field-cell"),e=0;for(let r of this.board)for(let s of r){let r=t[e];r.textContent=0===s?"":s,r.className="field-cell",s>0&&r.classList.add(`field-cell--${s}`),e++}document.querySelector(".game-score").textContent=this.gameScore}addRandomTile(){let t=[];for(let e=0;e<this.board.length;e++)for(let r=0;r<this.board.length;r++)0===this.board[e][r]&&t.push({row:e,col:r});if(0===t.length)return;let e=Math.floor(Math.random()*t.length),r=t[e];this.board[r.row][r.col]=.9>Math.random()?2:4}arraysEqual(t,e){return t.length===e.length&&t.every((t,r)=>t===e[r])}checkWin(){for(let t of this.board)if(t.includes("2048"))return!0;return!1}checkLose(){for(let t of this.board)for(let e=0;e<t.length-1;e++)if(t[e]===t[e+1])return!1;for(let t=0;t<this.board.length;t++)for(let e=0;e<this.board.length-1;e++)if(this.board[e][t]===this.board[e+1][t])return!1;for(let t of this.board)for(let e of t)if(0===e)return!1;return!0}updateStatus(){let t=document.querySelector(".message-win"),e=document.querySelector(".message-lose"),r=document.querySelector(".message-start");this.checkWin()?(this.status="win",r.classList.add("hidden"),t.classList.remove("hidden")):this.checkLose()&&(this.status="lose",r.classList.add("hidden"),e.classList.remove("hidden"))}};document.querySelector(".start").addEventListener("click",()=>{t.start()}),document.addEventListener("keydown",e=>{switch(e.preventDefault(),e.code){case"ArrowLeft":t.moveLeft();break;case"ArrowUp":t.moveUp();break;case"ArrowRight":t.moveRight();break;case"ArrowDown":t.moveDown()}});
//# sourceMappingURL=index.04a54663.js.map
