var t;t=new(function(){var t;function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];(function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")})(this,e),this.board=t,this.gameScore=0,this.status="idle"}return t=[{key:"moveLeft",value:function(){for(var t=this,e=!1,r=0;r<this.board.length;r++)!function(r){for(var a=t.board[r].filter(function(t){return 0!==t}),n=[],o=0;o<a.length;o++)o<a.length-1&&a[o]===a[o+1]?(n.push(2*a[o]),t.gameScore+=2*a[o],a[o+1]=0,e=!0):0!==a[o]&&n.push(a[o]);for(a=n.filter(function(t){return 0!==t});a.length<4;)a.push(0);t.arraysEqual(t.board[r],a)||(t.board[r]=a,e=!0)}(r);e&&(this.addRandomTile(),this.render(),this.updateStatus())}},{key:"moveRight",value:function(){for(var t=this,e=!1,r=0;r<this.board.length;r++)!function(r){for(var a=t.board[r].filter(function(t){return 0!==t}),n=[],o=a.length-1;o>=0;o--)o>0&&a[o]===a[o-1]?(n.unshift(2*a[o]),t.gameScore+=2*a[o],a[o-1]=0,e=!0):0!==a[o]&&n.unshift(a[o]);for(a=n.filter(function(t){return 0!==t});a.length<4;)a.unshift(0);t.arraysEqual(t.board[r],a)||(t.board[r]=a,e=!0)}(r);e&&(this.addRandomTile(),this.render(),this.updateStatus())}},{key:"moveUp",value:function(){for(var t=this,e=!1,r=0;r<4;r++)!function(r){for(var a=[],n=0;n<4;n++)0!==t.board[n][r]&&a.push(t.board[n][r]);for(var o=[],i=0;i<a.length;i++)i<a.length-1&&a[i]===a[i+1]?(o.push(2*a[i]),t.gameScore+=2*a[i],a[i+1]=0,e=!0):0!==a[i]&&o.push(a[i]);for(a=o.filter(function(t){return 0!==t});a.length<4;)a.push(0);for(var s=0;s<4;s++)t.board[s][r]!==a[s]&&(t.board[s][r]=a[s],e=!0)}(r);e&&(this.addRandomTile(),this.render(),this.updateStatus())}},{key:"moveDown",value:function(){for(var t=this,e=!1,r=0;r<4;r++)!function(r){for(var a=[],n=0;n<4;n++)0!==t.board[n][r]&&a.push(t.board[n][r]);for(var o=[],i=a.length-1;i>=0;i--)i>0&&a[i]===a[i-1]?(o.unshift(2*a[i]),t.gameScore+=2*a[i],a[i-1]=0,e=!0):0!==a[i]&&o.unshift(a[i]);for(a=o.filter(function(t){return 0!==t});a.length<4;)a.unshift(0);for(var s=0;s<4;s++)t.board[s][r]!==a[s]&&(t.board[s][r]=a[s],e=!0)}(r);e&&(this.addRandomTile(),this.render(),this.updateStatus())}},{key:"getScore",value:function(){return this.gameScore}},{key:"getState",value:function(){return this.board}},{key:"getStatus",value:function(){return this.status}},{key:"start",value:function(){this.board=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];var t=document.querySelector(".message-lose"),e=document.querySelector(".message-win"),r=document.querySelector(".message-start");t.classList.add("hidden"),e.classList.add("hidden"),r.classList.remove("hidden"),this.status="playing",this.gameScore=0;var a=document.querySelector("button");a.classList.remove("start"),a.classList.add("restart"),a.textContent="Restart",this.addRandomTile(),this.addRandomTile(),this.render()}},{key:"restart",value:function(){this.start()}},{key:"render",value:function(){var t=document.querySelectorAll(".field-cell"),e=0,r=!0,a=!1,n=void 0,o=!0,i=!1,s=void 0;try{for(var l,u=this.board[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var d=l.value;try{for(var h,c=d[Symbol.iterator]();!(r=(h=c.next()).done);r=!0){var f=h.value,v=t[e];v.textContent=0===f?"":f,v.className="field-cell",f>0&&v.classList.add("field-cell--".concat(f)),e++}}catch(t){a=!0,n=t}finally{try{r||null==c.return||c.return()}finally{if(a)throw n}}}}catch(t){i=!0,s=t}finally{try{o||null==u.return||u.return()}finally{if(i)throw s}}document.querySelector(".game-score").textContent=this.gameScore}},{key:"addRandomTile",value:function(){for(var t=[],e=0;e<this.board.length;e++)for(var r=0;r<this.board.length;r++)0===this.board[e][r]&&t.push({row:e,col:r});if(0!==t.length){var a=Math.floor(Math.random()*t.length),n=t[a];this.board[n.row][n.col]=.9>Math.random()?2:4}}},{key:"arraysEqual",value:function(t,e){return t.length===e.length&&t.every(function(t,r){return t===e[r]})}},{key:"checkWin",value:function(){var t=!0,e=!1,r=void 0;try{for(var a,n=this.board[Symbol.iterator]();!(t=(a=n.next()).done);t=!0)if(a.value.includes("2048"))return!0}catch(t){e=!0,r=t}finally{try{t||null==n.return||n.return()}finally{if(e)throw r}}return!1}},{key:"checkLose",value:function(){var t=!0,e=!1,r=void 0;try{for(var a,n=this.board[Symbol.iterator]();!(t=(a=n.next()).done);t=!0)for(var o=a.value,i=0;i<o.length-1;i++)if(o[i]===o[i+1])return!1}catch(t){e=!0,r=t}finally{try{t||null==n.return||n.return()}finally{if(e)throw r}}for(var s=0;s<this.board.length;s++)for(var l=0;l<this.board.length-1;l++)if(this.board[l][s]===this.board[l+1][s])return!1;var u=!0,d=!1,h=void 0,c=!0,f=!1,v=void 0;try{for(var y,m=this.board[Symbol.iterator]();!(c=(y=m.next()).done);c=!0){var b=y.value;try{for(var g,S=b[Symbol.iterator]();!(u=(g=S.next()).done);u=!0){var k=g.value;if(0===k)return!1}}catch(t){d=!0,h=t}finally{try{u||null==S.return||S.return()}finally{if(d)throw h}}}}catch(t){f=!0,v=t}finally{try{c||null==m.return||m.return()}finally{if(f)throw v}}return!0}},{key:"updateStatus",value:function(){var t=document.querySelector(".message-win"),e=document.querySelector(".message-lose"),r=document.querySelector(".message-start");this.checkWin()?(this.status="win",r.classList.add("hidden"),t.classList.remove("hidden")):this.checkLose()&&(this.status="lose",r.classList.add("hidden"),e.classList.remove("hidden"))}}],function(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}(e.prototype,t),e}()),document.querySelector(".start").addEventListener("click",function(){t.start()}),document.addEventListener("keydown",function(e){switch(e.preventDefault(),e.code){case"ArrowLeft":t.moveLeft();break;case"ArrowUp":t.moveUp();break;case"ArrowRight":t.moveRight();break;case"ArrowDown":t.moveDown()}});
//# sourceMappingURL=index.b1aa7178.js.map
